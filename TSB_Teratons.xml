<?xml version="1.0" encoding="utf-8"?>





<!DOCTYPE TranscendenceModule
	[
<!-- UID Codes:
E314****- Trans X
E31400**- TX2 modules
E31401**- Soveriengs, Images, Sounds, Res.
E3141*** to E3145***- objects/items
E3146*** to E314D***- space objects
E314E***- other
E314F***- reserved for mini-extentions
-->


	<!ENTITY unidExtension						"0xE3140010">

	<!-- <!ENTITY svTeratonLooters					"0xE314E530">  -->
	<!ENTITY svTeraton1						"0xE314E531">
	<!ENTITY svTeratonDefence1					"0xE314E532">
	<!ENTITY svTeraton2						"0xE314E533">
	<!ENTITY svTeratonDefence2					"0xE314E534">
	<!ENTITY svTeraton3						"0xE314E535">
	<!ENTITY svTeratonDefence3					"0xE314E536">
	<!ENTITY svTeraton4						"0xE314E537">
	<!ENTITY svTeratonDefence4					"0xE314E538">
	<!ENTITY svTeraton5						"0xE314E539">
	<!ENTITY svTeratonDefence5					"0xE314E53A">
	<!ENTITY svTeratonRaiders					"0xE314E53B">
	
	
	<!ENTITY rsTeratonGunship					"0xE3140630">
	<!ENTITY rsTeratonHeavyGunship					"0xE3140631">
	<!ENTITY rsTeratonFighter					"0xE3140632">
	<!ENTITY rsTeratonFreighter					"0xE3140633">
	<!ENTITY rsTeratonFreighterBig					"0xE3140634">
	<!ENTITY rsTeratonDefenders					"0xE3140635">
	
	<!ENTITY itBioArmorL						"0xE3141530">
	<!ENTITY itBioArmorM						"0xE3141531">
	<!ENTITY itBioArmorH						"0xE3141532">
	<!ENTITY itTeratonGrade1Deflector				"0xE3141533">
	<!ENTITY itTeratonGrade2Deflector				"0xE3141534">
	<!ENTITY itTeratonGrade3Deflector				"0xE3141535">
	<!ENTITY itTeratonGrade4Deflector				"0xE3141536">
	<!ENTITY itDualKytrynBlaster					"0xE3141537">
	<!ENTITY itDualPlasmaBolter					"0xE3141538">
	<!ENTITY itPlasmaBolter						"0xE3141539">
	<!ENTITY itPlasmaDrill						"0xE314153A">
	
	<!ENTITY scTeratonGunship					"0xE3146530">
	<!ENTITY scTeratonHeavyGunship					"0xE3146531">
	<!ENTITY scTeratonFighter					"0xE3146532">
	<!ENTITY scTeratonFreighter					"0xE3146533">
	<!ENTITY scTeratonFreighterBig					"0xE3146534">
	<!ENTITY scTeratonDefender					"0xE3146535">
	<!ENTITY scTeratonDrill						"0xE3146536">
	
	<!ENTITY tbTeratonDefenders					"0xE314E53C">
	<!ENTITY tbTeratonEliteDefenders				"0xE314E53D">
	<!ENTITY tbTeratonPrivateCrafts					"0xE314E53E">
	<!ENTITY tbTeratonTraffic					"0xE314E53F">
	<!ENTITY tbTeratonEncounters					"0xE314E530">

]>
<TranscendenceModule> <!-- UNID="0xE314000#" version="1.0" -->

<Sovereign UNID="&svTeraton1;"
		name="independent teraton merchant"
		alignment="neutral"
		>
		<Language>
			<Message id="8"  text="Watch your targets!"/>
			<Message id="9"  text=""/>
		</Language>
		<Relationships>
			<Relationship sovereign="&svTeratonDefence1;" disposition="friend" mutual="true"/>
			<Relationship sovereign="&svTeratonRaiders;" disposition="enemy"/>
			<!-- <Relationship sovereign="&svTeratonLooters;" disposition="enemy"/> -->
		</Relationships>
	</Sovereign>
<Sovereign UNID="&svTeratonDefence1;"
		name="independent teraton merchant"
		alignment="neutral"
		>
		<Language>
			<Message id="8"  text="Watch your targets!"/>
			<Message id="9"  text=""/>
		</Language>
		<Relationships>
			<Relationship sovereign="&svPlayer;" disposition="neutral"/>
			<Relationship sovereign="&svTeratonRaiders;" disposition="enemy"/>
			<!-- <Relationship sovereign="&svTeratonLooters;" disposition="enemy"/> -->
		</Relationships>
	</Sovereign>
<Sovereign UNID="&svTeraton2;"
		name="independent teraton merchant"
		alignment="neutral"
		>
		<Language>
			<Message id="8"  text="Watch your targets!"/>
			<Message id="9"  text=""/>
		</Language>
		<Relationships>
			<Relationship sovereign="&svTeratonDefence2;" disposition="friend" mutual="true"/>
			<Relationship sovereign="&svTeratonRaiders;" disposition="enemy"/>
			<!-- <Relationship sovereign="&svTeratonLooters;" disposition="enemy"/> -->
		</Relationships>
	</Sovereign>
<Sovereign UNID="&svTeratonDefence2;"
		name="independent teraton merchant"
		alignment="neutral"
		>
		<Language>
			<Message id="8"  text="Watch your targets!"/>
			<Message id="9"  text=""/>
		</Language>
		<Relationships>
			<Relationship sovereign="&svPlayer;" disposition="neutral"/>
			<Relationship sovereign="&svTeratonRaiders;" disposition="enemy"/>
			<!-- <Relationship sovereign="&svTeratonLooters;" disposition="enemy"/> -->
		</Relationships>
	</Sovereign>
<Sovereign UNID="&svTeraton3;"
		name="independent teraton merchant"
		alignment="neutral"
		>
		<Language>
			<Message id="8"  text="Watch your targets!"/>
			<Message id="9"  text=""/>
		</Language>
		<Relationships>
			<Relationship sovereign="&svTeratonDefence3;" disposition="friend" mutual="true"/>
			<Relationship sovereign="&svTeratonRaiders;" disposition="enemy"/>
			<!-- <Relationship sovereign="&svTeratonLooters;" disposition="enemy"/> -->
		</Relationships>
	</Sovereign>
<Sovereign UNID="&svTeratonDefence3;"
		name="independent teraton merchant"
		alignment="neutral"
		>
		<Language>
			<Message id="8"  text="Watch your targets!"/>
			<Message id="9"  text=""/>
		</Language>
		<Relationships>
			<Relationship sovereign="&svPlayer;" disposition="neutral"/>
			<Relationship sovereign="&svTeratonRaiders;" disposition="enemy"/>
			<!-- <Relationship sovereign="&svTeratonLooters;" disposition="enemy"/> -->
		</Relationships>
	</Sovereign>
<Sovereign UNID="&svTeraton4;"
		name="independent teraton merchant"
		alignment="neutral"
		>
		<Language>
			<Message id="8"  text="Watch your targets!"/>
			<Message id="9"  text=""/>
		</Language>
		<Relationships>
			<Relationship sovereign="&svTeratonDefence4;" disposition="friend" mutual="true"/>
			<Relationship sovereign="&svTeratonRaiders;" disposition="enemy"/>
			<!-- <Relationship sovereign="&svTeratonLooters;" disposition="enemy"/> -->
		</Relationships>
	</Sovereign>
<Sovereign UNID="&svTeratonDefence4;"
		name="independent teraton merchant"
		alignment="neutral"
		>
		<Language>
			<Message id="8"  text="Watch your targets!"/>
			<Message id="9"  text=""/>
		</Language>
		<Relationships>
			<Relationship sovereign="&svPlayer;" disposition="neutral"/>
			<Relationship sovereign="&svTeratonRaiders;" disposition="enemy"/>
			<!-- <Relationship sovereign="&svTeratonLooters;" disposition="enemy"/> -->
		</Relationships>
	</Sovereign>
<Sovereign UNID="&svTeraton5;"
		name="independent teraton merchant"
		alignment="neutral"
		>
		<Language>
			<Message id="8"  text="Watch your targets!"/>
			<Message id="9"  text=""/>
		</Language>
		<Relationships>
			<Relationship sovereign="&svTeratonDefence5;" disposition="friend" mutual="true"/>
			<Relationship sovereign="&svTeratonRaiders;" disposition="enemy"/>
			<!-- <Relationship sovereign="&svTeratonLooters;" disposition="enemy"/> -->
		</Relationships>
	</Sovereign>
<Sovereign UNID="&svTeratonDefence5;"
		name="independent teraton merchant"
		alignment="neutral"
		>
		<Language>
			<Message id="8"  text="Watch your targets!"/>
			<Message id="9"  text=""/>
		</Language>
		<Relationships>
			<Relationship sovereign="&svPlayer;" disposition="neutral"/>
			<Relationship sovereign="&svTeratonRaiders;" disposition="enemy"/>
			<!-- <Relationship sovereign="&svTeratonLooters;" disposition="enemy"/> -->
		</Relationships>
	</Sovereign>
<Sovereign UNID="&svTeratonRaiders;"
		name="independent teraton merchant"
		alignment="destructive chaos"
		>
		<Relationships>
			<Relationship sovereign="&svPlayer;" disposition="enemy"/>
			<!-- <Relationship sovereign="&svTeratonLooters;" disposition="enemy"/> -->
			<Relationship sovereign="&svTeraton5;" disposition="enemy"/>
			<Relationship sovereign="&svTeratonDefence5;" disposition="enemy"/>
			<Relationship sovereign="&svTeraton4;" disposition="enemy"/>
			<Relationship sovereign="&svTeratonDefence4;" disposition="enemy"/>
			<Relationship sovereign="&svTeraton3;" disposition="enemy"/>
			<Relationship sovereign="&svTeratonDefence3;" disposition="enemy"/>
			<Relationship sovereign="&svTeraton2;" disposition="enemy"/>
			<Relationship sovereign="&svTeratonDefence2;" disposition="enemy"/>
			<Relationship sovereign="&svTeraton1;" disposition="enemy"/>
			<Relationship sovereign="&svTeratonDefence1;" disposition="enemy"/>
		</Relationships>
	</Sovereign>
	
	<!--
<Sovereign UNID="&svTeratonLooters;"
		name="independent teraton merchant"
		alignment="destructive order"
		>
		<Relationships>
			<Relationship sovereign="&svPlayer;" disposition="neutral"/>
			<Relationship sovereign="&svTeratonRaiders;" disposition="enemy"/>
			<Relationship sovereign="&svTeraton5;" disposition="enemy"/>
			<Relationship sovereign="&svTeratonDefence5;" disposition="enemy"/>
			<Relationship sovereign="&svTeraton4;" disposition="enemy"/>
			<Relationship sovereign="&svTeratonDefence4;" disposition="enemy"/>
			<Relationship sovereign="&svTeraton3;" disposition="enemy"/>
			<Relationship sovereign="&svTeratonDefence3;" disposition="enemy"/>
			<Relationship sovereign="&svTeraton2;" disposition="enemy"/>
			<Relationship sovereign="&svTeratonDefence2;" disposition="enemy"/>
			<Relationship sovereign="&svTeraton1;" disposition="enemy"/>
			<Relationship sovereign="&svTeratonDefence1;" disposition="enemy"/>
		</Relationships>
	</Sovereign>
	-->

<!-- Resources -->
	
	<Image UNID="&rsTeratonGunship;"		bitmap="resources/images/TeratonInterceptor.jpg"		bitmask="resources/images/TeratonInterceptorMask.bmp" />
	<Image UNID="&rsTeratonHeavyGunship;"		bitmap="resources/images/TeratonArbiter.jpg"		bitmask="resources/images/TeratonArbiterMask.bmp" />
	<Image UNID="&rsTeratonFighter;"		bitmap="resources/images/TeratonFighter.jpg"		bitmask="resources/images/TeratonFighterMask.bmp" />
	<Image UNID="&rsTeratonFreighter;"		bitmap="resources/images/TeratonSmallFreighter.jpg"		bitmask="resources/images/TeratonSmallFreighterMask.bmp" />
	<Image UNID="&rsTeratonFreighterBig;"		bitmap="resources/images/TeratonLargeFreighter.jpg"		bitmask="resources/images/TeratonLargeFreighterMask.bmp" />
	<Image UNID="&rsTeratonDefenders;"		bitmap="resources/images/TeratonRadialShip.jpg"		bitmask="resources/images/TeratonRadialShipMask.bmp" />
	
<!-- Teraton Ships -->

<ShipClass UNID="&scTeratonGunship;"
		manufacturer=		"Unknown Teraton Nest"
		class=				""
		type=				"Gunship"
		score=				"300"
		techOrder=			"mech"
		
		mass=				"250"
		cargoSpace=			"150"
		thrust=				"400"
		maneuver=			"2"
		maxSpeed=			"23"
			rotationCount=		"40"
		leavesWreck=		"100"
		>

	<Armor>
		<ArmorSection start="315" span="90" armorID="&itBioArmorM;" areaSet="0,2" />
		<ArmorSection start="225" span="90" armorID="&itBioArmorM;" areaSet="3,4" />
		<ArmorSection start="135" span="90" armorID="&itBioArmorM;" areaSet="1,6" />
		<ArmorSection start="45"  span="90" armorID="&itBioArmorM;" areaSet="7,13" />
	</Armor>

	<Devices>
		<Device deviceID="&itDualPlasmaBolter;"/>
		<Device deviceID="&itTeratonGrade1Deflector;"/>
	</Devices>

	<Image imageID="&rsTeratonGunship;" imageX="0" imageY="0" imageWidth="60" imageHeight="60" imageFrameCount="0" imageTicksPerFrame="0"/>

	<AISettings
		fireRateAdj=		"20"
		fireAccuracy=		"90"
		perception=			"4"
		/>

</ShipClass>

<ShipClass UNID="&scTeratonHeavyGunship;"
		manufacturer=		"Unknown Teraton Nest"
		class=				""
		type=				"Heavy Gunship"
		score=				"400"
		techOrder=			"mech"
		
		mass=				"250"
		cargoSpace=			"150"
		thrust=				"400"
		maneuver=			"3"
		maxSpeed=			"21"
			rotationCount=		"40"
		leavesWreck=		"100"
		>

	<Armor>
		<ArmorSection start="315" span="90" armorID="&itBioArmorM;" areaSet="0,2" />
		<ArmorSection start="225" span="90" armorID="&itBioArmorM;" areaSet="3,4" />
		<ArmorSection start="135" span="90" armorID="&itBioArmorM;" areaSet="1,6" />
		<ArmorSection start="45"  span="90" armorID="&itBioArmorM;" areaSet="7,13" />
	</Armor>

	<Devices>
		<Device deviceID="&itDualKytrynBlaster;"/>
		<Device deviceID="&itTeratonGrade2Deflector;"/>
	</Devices>

	<Image imageID="&rsTeratonHeavyGunship;" imageX="0" imageY="0" imageWidth="80" imageHeight="80" imageFrameCount="0" imageTicksPerFrame="0"/>

	<AISettings
		fireRateAdj=		"20"
		fireAccuracy=		"90"
		perception=			"4"
		/>

</ShipClass>

<ShipClass UNID="&scTeratonFighter;"
		manufacturer=		"Unknown Teraton Nest"
		class=				""
		type=				"Heavy Gunship"
		score=				"200"
		techOrder=			"mech"
		
		mass=				"250"
		cargoSpace=			"150"
		thrust=				"400"
		maneuver=			"3"
		maxSpeed=			"21"
			rotationCount=		"40"
		leavesWreck=		"100"
		>

	<Armor>
		<ArmorSection start="315" span="90" armorID="&itBioArmorL;" areaSet="0,2" />
		<ArmorSection start="225" span="90" armorID="&itBioArmorL;" areaSet="3,4" />
		<ArmorSection start="135" span="90" armorID="&itBioArmorL;" areaSet="1,6" />
		<ArmorSection start="45"  span="90" armorID="&itBioArmorL;" areaSet="7,13" />
	</Armor>

	<Devices>
		<Device deviceID="&itPlasmaBolter;"/>
	</Devices>

	<Image imageID="&rsTeratonFighter;" imageX="0" imageY="0" imageWidth="40" imageHeight="40" imageFrameCount="0" imageTicksPerFrame="0"/>

	<AISettings
		fireRateAdj=		"20"
		fireAccuracy=		"90"
		perception=			"4"
		/>

</ShipClass>

<ShipClass UNID="&scTeratonFreighter;"
		manufacturer=		"Unknown Teraton Nest"
		class=				""
		type=				"Freighter"
		score=				"300"
		techOrder=			"mech"
		
		mass=				"250"
		cargoSpace=			"150"
		thrust=				"400"
		maneuver=			"3"
		maxSpeed=			"21"
			rotationCount=		"40"
		leavesWreck=		"100"
		>

	<Armor>
		<ArmorSection start="315" span="90" armorID="&itBioArmorM;" areaSet="0,2" />
		<ArmorSection start="225" span="90" armorID="&itBioArmorM;" areaSet="3,4" />
		<ArmorSection start="135" span="90" armorID="&itBioArmorM;" areaSet="1,6" />
		<ArmorSection start="45"  span="90" armorID="&itBioArmorM;" areaSet="7,13" />
	</Armor>

	<Devices>
		<Device deviceID="&itPlasmaBolter;" omnidirectional="true" posAngle="0" posRadius="30"/>
		<Device deviceID="&itPlasmaBolter;" omnidirectional="true" secondaryWeapon="true" posAngle="180" posRadius="30"/>
		<Device deviceID="&itTeratonGrade3Deflector;"/>
	</Devices>

	<Image imageID="&rsTeratonFreighter;" imageX="0" imageY="0" imageWidth="80" imageHeight="80" imageFrameCount="0" imageTicksPerFrame="0"/>

	<AISettings
		fireRateAdj=		"20"
		fireAccuracy=		"90"
		perception=			"4"
		/>

</ShipClass>

<ShipClass UNID="&scTeratonFreighterBig;"
		manufacturer=		"Unknown Teraton Nest"
		class=				""
		type=				"Large Freighter"
		score=				"350"
		techOrder=			"mech"
		
		mass=				"250"
		cargoSpace=			"150"
		thrust=				"400"
		maneuver=			"3"
		maxSpeed=			"21"
			rotationCount=		"40"
		leavesWreck=		"100"
		>

	<Armor>
		<ArmorSection start="315" span="90" armorID="&itBioArmorH;" areaSet="0,2" />
		<ArmorSection start="225" span="90" armorID="&itBioArmorH;" areaSet="3,4" />
		<ArmorSection start="135" span="90" armorID="&itBioArmorH;" areaSet="1,6" />
		<ArmorSection start="45"  span="90" armorID="&itBioArmorH;" areaSet="7,13" />
	</Armor>

	<Devices>
		<Device deviceID="&itPlasmaBolter;" omnidirectional="true" posAngle="0" posRadius="30"/>
		<Device deviceID="&itPlasmaBolter;" omnidirectional="true" secondaryWeapon="true" posAngle="180" posRadius="30"/>
		<Device deviceID="&itPlasmaBolter;" omnidirectional="true" secondaryWeapon="true" posAngle="0" posRadius="60"/>
		<Device deviceID="&itPlasmaBolter;" omnidirectional="true" secondaryWeapon="true" posAngle="180" posRadius="60"/>
		<Device deviceID="&itTeratonGrade3Deflector;"/>
	</Devices>

	<Image imageID="&rsTeratonFreighterBig;" imageX="0" imageY="0" imageWidth="160" imageHeight="160" imageFrameCount="0" imageTicksPerFrame="0"/>

	<AISettings
		fireRateAdj=		"20"
		fireAccuracy=		"90"
		perception=			"4"
		/>

</ShipClass>

<ShipClass UNID="&scTeratonDefender;"
		manufacturer=		"Unknown Teraton Nest"
		class=				""
		type=				"Defender"
		score=				"800"
		techOrder=			"mech"
		
		mass=				"250"
		cargoSpace=			"150"
		thrust=				"400"
		maneuver=			"3"
		maxSpeed=			"21"
			rotationCount=		"40"
		leavesWreck=		"100"
		>

	<Armor>
		<ArmorSection start="315" span="90" armorID="&itBioArmorH;" areaSet="0,2" />
		<ArmorSection start="225" span="90" armorID="&itBioArmorH;" areaSet="3,4" />
		<ArmorSection start="135" span="90" armorID="&itBioArmorH;" areaSet="1,6" />
		<ArmorSection start="45"  span="90" armorID="&itBioArmorH;" areaSet="7,13" />
	</Armor>

	<Devices>
		<Device deviceID="&itKytrynBlaster;" omnidirectional="true" posAngle="0" posRadius="0"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="240" maxFireArc="120" secondaryWeapon="true" posAngle="0" posRadius="20"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="300" maxFireArc="180" secondaryWeapon="true" posAngle="60" posRadius="20"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="0" maxFireArc="240" secondaryWeapon="true" posAngle="120" posRadius="20"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="60" maxFireArc="300" secondaryWeapon="true" posAngle="180" posRadius="20"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="120" maxFireArc="0" secondaryWeapon="true" posAngle="240" posRadius="20"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="180" maxFireArc="60" secondaryWeapon="true" posAngle="300" posRadius="20"/>
		<Device deviceID="&itTeratonGrade4Deflector;"/>
	</Devices>

	<Image imageID="&rsTeratonDefenders;" imageX="0" imageY="0" imageWidth="80" imageHeight="80" imageFrameCount="0" imageTicksPerFrame="0"/>

	<AISettings
		fireRateAdj=		"20"
		fireAccuracy=		"90"
		perception=			"4"
		/>

</ShipClass>

<ShipClass UNID="&scTeratonDrill;"
		manufacturer=		"Unknown Teraton Nest"
		class=				""
		type=				"Drillship"
		score=				"800"
		techOrder=			"mech"
		
		mass=				"250"
		cargoSpace=			"150"
		thrust=				"400"
		maneuver=			"3"
		maxSpeed=			"21"
			rotationCount=		"40"
		leavesWreck=		"100"
		>

	<Armor>
		<ArmorSection start="315" span="90" armorID="&itBioArmorH;" areaSet="0,2" />
		<ArmorSection start="225" span="90" armorID="&itBioArmorH;" areaSet="3,4" />
		<ArmorSection start="135" span="90" armorID="&itBioArmorH;" areaSet="1,6" />
		<ArmorSection start="45"  span="90" armorID="&itBioArmorH;" areaSet="7,13" />
	</Armor>

	<Devices>
		<Device deviceID="&itPlasmaDrill;" omnidirectional="true" posAngle="0" posRadius="0"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="240" maxFireArc="120" secondaryWeapon="true" posAngle="0" posRadius="20"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="300" maxFireArc="180" secondaryWeapon="true" posAngle="60" posRadius="20"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="0" maxFireArc="240" secondaryWeapon="true" posAngle="120" posRadius="20"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="60" maxFireArc="300" secondaryWeapon="true" posAngle="180" posRadius="20"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="120" maxFireArc="0" secondaryWeapon="true" posAngle="240" posRadius="20"/>
		<Device deviceID="&itPlasmaBolter;" minFireArc="180" maxFireArc="60" secondaryWeapon="true" posAngle="300" posRadius="20"/>
		<Device deviceID="&itTeratonGrade2Deflector;"/>
	</Devices>

	<Image imageID="&rsTeratonDefenders;" imageX="0" imageY="0" imageWidth="80" imageHeight="80" imageFrameCount="0" imageTicksPerFrame="0"/>

	<AISettings
		fireRateAdj=		"20"
		fireAccuracy=		"90"
		perception=			"4"
		/>

</ShipClass>

<!-- Teraton Items -->

	<ItemType UNID="&itDualKytrynBlaster;"
			name=				"Dual Kytryn blaster"
			level=				"10"
			value=				"400000"
			mass=				"3000"
			frequency=			"rare"
			modifiers=			"Alien; MajorItem; Military"
			unknownType=		"&itUnknownAlienDevice10;"

			description=		"Kytryn blasters were created by the Teratons based on research on Iocrym technology."
			>

		<Image imageID="&rsItems1;" imageX="96" imageY="0" imageWidth="96" imageHeight="96"/>

		<Weapon
				fireRate=			"15"
				configuration=			"dual"
				type=				"missile"
				missileSpeed=		"40"
				hitPoints=			"15"

				lifetime=			"90"
				damage=				"plasma:3d12; WMD5"
				powerUse=			"3500"
				sound=				"&snRecoillessCannon;"
				>

			<Effect>
				<Image imageID="&rsMediumExplosions;" imageX="0" imageY="64" imageWidth="64" imageHeight="64" imageFrameCount="16" imageTicksPerFrame="5" blend="brighten" />
			</Effect>

		</Weapon>

	</ItemType>

	<ItemType UNID="&itDualPlasmaBolter;"
			name=				"Dual Plasma Bolter"
			level=				"9"
			value=				"200000"
			mass=				"6000"
			frequency=			"rare"
			modifiers=			"MajorItem; Military; Teraton"
		

			description=		"This is a pair of Teraton plasma bolters in a dual configuration."
			>

		<Image imageID="&rsItems1;" imageX="96" imageY="0" imageWidth="96" imageHeight="96"/>

		<Weapon
				fireRate=			"15"
				configuration=			"dual"
				type=				"missile"
				missileSpeed=		"50"
				hitPoints=			"15"

				lifetime=			"90"
				damage=				"plasma:3d6; WMD4"
				powerUse=			"2000"
				sound=				"&snRecoillessCannon;"
				vaporTrailLength=	"50"
				vaporTrailWidth=	"110"
				vaporTrailWidthInc=	"1"
				vaporTrailColor=	"0xff, 0x65, 0x21"
				>

			<Effect>
				<MoltenBolt
						width=				"4"
						length=				"20"
						growth=				"3"
						primaryColor=		"0xff, 0xfd, 0xad"
						secondaryColor=		"0xff, 0x65, 0x21"
						/>
			</Effect>

		</Weapon>

	</ItemType>
	<ItemType UNID="&itPlasmaBolter;"
			name=				"Plasma Bolter"
			level=				"8"
			value=				"100000"
			mass=				"3000"
			frequency=			"rare"
			modifiers=			"MajorItem; Military"
		

			description=		"A device of teraton design, the plasma bolter being lighter and cheaper than their kytryn."
			>

		<Image imageID="&rsItems1;" imageX="96" imageY="0" imageWidth="96" imageHeight="96"/>

		<Weapon
				fireRate=			"15"
				
				type=				"missile"
				missileSpeed=		"50"
				hitPoints=			"15"

				lifetime=			"90"
				damage=				"plasma:3d6; WMD4"
				powerUse=			"1000"
				sound=				"&snRecoillessCannon;"
				vaporTrailLength=	"50"
				vaporTrailWidth=	"110"
				vaporTrailWidthInc=	"1"
				vaporTrailColor=	"0xff, 0x65, 0x21"
				>

			<Effect>
				<MoltenBolt
						width=				"4"
						length=				"20"
						growth=				"3"
						primaryColor=		"0xff, 0xfd, 0xad"
						secondaryColor=		"0xff, 0x65, 0x21"
						/>
			</Effect>

		</Weapon>

	</ItemType>

	<ItemType UNID="&itTeratonGrade1Deflector;"
			name=				"Teraton grade I deflector"
			level=				"6"
			value=				"6600"
			mass=				"1000"
			frequency=			"rare"
			modifiers=			"Teraton; MinorItem"
			showReference=		"true"

			description=		"This deflector system, developed by the teratons, is highly effective against plasma weapons, but not much else."

			sortName=			"deflector, teraton grade I"
			>

		<Image imageID="&rsItems1;" imageX="192" imageY="0" imageWidth="96" imageHeight="96"/>

		<Shields
				hitPoints=		"50"
				hpBonus=		" -00, -0, -10, +5, -20, +10, -40, +50, -50"
				absorbAdj=		"100,100,100,100, 100,100,100,100, 100,100,100,100, 100,100,100,100"
				regenTime=		"30"
				regenHP=		"8"
				depletionDelay=	"20"
				powerUse=		"200"
				/>
	</ItemType>
	<ItemType UNID="&itTeratonGrade2Deflector;"
			name=				"Teraton grade II deflector"
			level=				"7"
			value=				"9800"
			mass=				"2000"
			frequency=			"rare"
			modifiers=			"Teraton; MinorItem"
			showReference=		"true"

			description=		"This deflector system, developed by the teratons, is highly effective against plasma weapons, but not much else."

			sortName=			"deflector, teraton grade II"
			>

		<Image imageID="&rsItems1;" imageX="192" imageY="0" imageWidth="96" imageHeight="96"/>

		<Shields
				hitPoints=		"100"
				hpBonus=		" -00, -0, -13, +10, -38, +20, -80, +90, -90"
				absorbAdj=		"100,100,100,100, 100,100,100,100, 100,100,100,100, 100,100,100,100"
				regenTime=		"30"
				regenHP=		"12"
				depletionDelay=	"20"
				powerUse=		"500"
				/>
	</ItemType>
	<ItemType UNID="&itTeratonGrade3Deflector;"
			name=				"Teraton grade III deflector"
			level=				"8"
			value=				"22000"
			mass=				"3000"
			frequency=			"rare"
			modifiers=			"Teraton; MinorItem"
			showReference=		"true"

			description=		"This deflector system, developed by the teratons, is highly effective against plasma weapons, but not much else."

			sortName=			"deflector, teraton grade III"
			>

		<Image imageID="&rsItems1;" imageX="192" imageY="0" imageWidth="96" imageHeight="96"/>

		<Shields
				hitPoints=		"150"
				hpBonus=		" -00, -0, -17, +15, -60, +30, -120, +140, -95"
				absorbAdj=		"100,100,100,100, 100,100,100,100, 100,100,100,100, 100,100,100,100"
				regenTime=		"30"
				regenHP=		"16"
				depletionDelay=	"20"
				powerUse=		"1000"
				/>
	</ItemType>
	<ItemType UNID="&itTeratonGrade4Deflector;"
			name=				"Teraton grade IV deflector"
			level=				"9"
			value=				"85000"
			mass=				"5000"
			frequency=			"rare"
			modifiers=			"Teraton; MinorItem"
			showReference=		"true"

			description=		"This deflector system, developed by the teratons, is highly effective against plasma weapons, but not much else."

			sortName=			"deflector, teraton grade IV"
			>

		<Image imageID="&rsItems1;" imageX="192" imageY="0" imageWidth="96" imageHeight="96"/>

		<Shields
				hitPoints=		"200"
				hpBonus=		" -00, -0, -20, +20, -70, +40, -160, +170, -99"
				absorbAdj=		"100,100,100,100, 100,100,100,100, 100,100,100,100, 100,100,100,100"
				regenTime=		"30"
				regenHP=		"20"
				depletionDelay=	"20"
				powerUse=		"1500"
				/>
	</ItemType>

	<ItemType UNID="&itBioArmorL;"
			name=				"Segment of Teraton Bio-Armor"
			level=				"7"
			value=				"10000"
			mass=				"2000"
			frequency=			"rare"
			numberAppearing=	"1d4"
			modifiers=			"MinorItem; Teraton; Specialty"

			description=		"Teraton bio-armor is slightly weaker than conventional armor, but it has the ability to regenerate for a low energy cost."

			firstPlural=		"true"
			
			>

		<Image imageID="&rsItems1;" imageX="0" imageY="0" imageWidth="96" imageHeight="96"/>

		<Armor
				hitPoints=	"90"
				repairTech=	"9"
				repairCost=	"10"
				installCost="250"

				repairRate=	"60"
				powerUse=	"10"
				/>

	</ItemType>
	<ItemType UNID="&itBioArmorM;"
			name=				"Segment of Teraton Bio-Armor"
			level=				"8"
			value=				"15000"
			mass=				"3000"
			frequency=			"rare"
			numberAppearing=	"1d4"
			modifiers=			"MinorItem; Teraton; Specialty"

			description=		"Powered armor regenerates itself like an energy shield, though not nearly as quickly. The V10 consumes 1.5 MWs per segment."

			firstPlural=		"true"
	
			>

		<Image imageID="&rsItems1;" imageX="0" imageY="0" imageWidth="96" imageHeight="96"/>

		<Armor
				hitPoints=	"120"
				repairTech=	"9"
				repairCost=	"10"
				installCost="250"

				repairRate=	"60"
				powerUse=	"10"
				/>

	</ItemType>
	<ItemType UNID="&itBioArmorH;"
			name=				"Segment of Heavy Teraton Bio-Armor"
			level=				"9"
			value=				"20000"
			mass=				"4000"
			frequency=			"rare"
			numberAppearing=	"1d4"
			modifiers=			"MinorItem; Teraton; Specialty"

			description=		"Powered armor regenerates itself like an energy shield, though not nearly as quickly. The V10 consumes 1.5 MWs per segment."

			firstPlural=		"true"
			
			>

		<Image imageID="&rsItems1;" imageX="0" imageY="0" imageWidth="96" imageHeight="96"/>

		<Armor
				hitPoints=	"150"
				repairTech=	"9"
				repairCost=	"10"
				installCost="250"

				repairRate=	"60"
				powerUse=	"10"
				/>

	</ItemType>
	
	<ItemType UNID="&itPlasmaDrill;"
			name=				"plasma drill"
			level=				"10"
			value=				"110000"
			mass=				"6000"
			frequency=			"rare"
			modifiers=			"Teraton; minoritem"

			description=		"Plasma drills are used for large-scale asteroid mining, but have been adapted by the teratons for use in destroying other teraton stations."

			>

		<Image imageID="&rsItems1;" imageX="96" imageY="0" imageWidth="96" imageHeight="96"/>

		<Weapon
				type=				"particles"

				damage=				"plasma:22; mining7; WMD2"
				fireRate=			"5"
				missileSpeed=		"40"
				lifetime=			"40"
				powerUse=			"2000"

				particleCount=		"22"
				particleSpreadAngle="0"
				sound=				"&snRecoillessCannon;"
				>

			<Effect>
				<Particle
						style=			"plain"
						minWidth=		"3" 
						maxWidth=		"6"
						primaryColor=	"0xfc, 0xe8, 0x87"
						secondaryColor=	"0x85, 0x0c, 0x0f"
						/>
			</Effect>
		</Weapon>

	</ItemType>
	
<!-- overwriting -->

	<StationType UNID="&baTeratonNestBase;"
			name=				"(teraton nest base)"
			>

		<Events>
			<OnBehavior>
				(if (not (objIsAbandoned gSource))
					(block (totalDefenders)
						; Count the number of defenders
						(setq totalDefenders (count (sysFindObject gSource "TAN:25; +teraton; -populated;")))
						(setq optimalDefenders (add 3 (typGetGlobalData &baTeratonNestBase; "nestsDestroyed")))
						
						(if (ls totalDefenders optimalDefenders)
							(terCreateDefender gSource)
							)
						)
					)
			</OnBehavior>
			
			<OnCreate>
				(block Nil
					; Create some defenders
					(for i 1 (random 3 5)
						(block (thePos theObj)
							(setq thePos (sysVectorRandom gSource (random 7 20) 4 "t"))
							(setq theObj (sysCreateStation &stTeratonDefender; thePos))
							(objAddSubordinate gSource theObj)
							)
						)
					
					; Register update event
					(sysAddObjRecurringTimerEvent 301 gSource "OnBehavior")
					)
			</OnCreate>
			
			<OnDestroy>
				(block Nil
					; Keep track of stations destroyed
					(typIncGlobalData &baTeratonNestBase; "nestsDestroyed")
					
					; Destroy items on the station
					(intDestroyItems gSource)
					)
			</OnDestroy>
		</Events>
	</StationType>
	
	<!-- Teraton Chrysalis
	
	EXTRA DATA
	
	openTime:			Tick on which chrysalis will open
	type:				One of the following
							'defender = Create a Teraton defender
	
	-->

	<StationType UNID="&stTeratonChrysalis;"
			name=				"Teraton chrysalis"
			sovereign=			"&svIndependentTrader;"
			dockScreen=			"Main"
			abandonedScreen=	"&dsAbandonedStation;"
			dockingPorts=		"4"
			noMapLabel=			"true"
			noFriendlyFire=		"true"
			canAttack=			"true"

			multiHull=			"true"
			mass=				"5000"
			armorID=			"&itLightIthaliumArmor;"
			maxHitPoints=		"250"
			repairRate=			"10"
			maxStructuralHitPoints="20"
			fireRateAdj=		"20"
			ejectaType=			"&vtWreckEjecta;"
			
			attributes=			"teraton, teratonChrysalis"
			>

		<Image	imageID="&rsTeratonChrysalis;" imageWidth="100" imageHeight="100"/>
		
		<Events>
			<OnBehavior>
				(block (openTime)
					(if (and (setq openTime (objGetData gSource "openTime"))
							(geq (unvGetTick) openTime)
							(not (objIsAbandoned gSource)))
						(block (theType theObj)
							; Create open animation effect
							(sysCreateEffect &efTeratonChrysalisOpen; Nil (objGetPos gSource))
							
							; Create the object
							(setq theType (objGetData gSource "type"))
							(switch
								(eq theType 'defender)
									(block (theBase)
										(setq theObj (sysCreateStation &stTeratonDefender; (objGetPos gSource)))
										
										; Find the nearest Teraton nest and make this a subordinate
										(if (setq theBase (sysFindObject gSource "TAN +teraton; +populated"))
											(objAddSubordinate theBase theObj)
											)
										)
								)
							
							; Destroy ourselves
							(objDestroy gSource)
							)
						)
					)
			</OnBehavior>
			
			<OnCreate>
				(sysAddObjRecurringTimerEvent 30 gSource "OnBehavior")
			</OnCreate>
		</Events>
		
		<DockScreens>
			<Main
				name=			"=(objGetName gSource)"
				>
				<Panes>
					<Default>
						<Initialize>
							(scrSetDesc gScreen
								"You are docked with a Teraton chrysalis\x97a pulsing mass of biomechamical systems. "
								"You see a bony structure taking shape inside the large spherical structure."
								)
						</Initialize>
						
						<Actions>
							<Action name="Undock" default="1" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

	</StationType>

	<!-- Teraton Defense Satellite -->

	<StationType UNID="&stTeratonDefender;"
			name=				"Teraton Defender"
			sovereign=			"&svIndependentTrader;"
			abandonedScreen=	"&dsAbandonedStation;"
			dockingPorts=		"4"
			noMapLabel=			"true"
			noFriendlyFire=		"true"
			canAttack=			"true"

			multiHull=			"true"
			mass=				"5000"
			armorID=			"&itLightIthaliumArmor;"
			maxHitPoints=		"150"
			maxStructuralHitPoints="40"
			fireRateAdj=		"20"
			ejectaType=			"&vtWreckEjecta;"
			
			attributes=			"teraton, teratonDefender"
			>

		<Image	imageID="&rsTeratonDefender;" imageWidth="64" imageHeight="64" imageFrameCount="12" imageTicksPerFrame="2"/>

		<Devices>
			<Device deviceID="&itKytrynBlaster;"	omnidirectional="true"/>
		</Devices>

	</StationType>

	<!-- Teraton Factory -->

	<StationType UNID="&stTeratonFactory;"
			name=				"Teraton factory"
			sovereign=			"&svTeraton1;"
			dockScreen=			"Main"
			abandonedScreen=	"&dsAbandonedStation;"
			canAttack=			"true"

			multiHull=			"true"
			armorID=			"&itIthaliumArmor;"
			maxHitPoints=		"850"
			hitPoints=			"850"
			repairRate=			"10"
			fireRateAdj=		"10"
			explosionType=		"&vtPlasmaExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"independent,friendly,envAir,envAvoidsFire,populated, teraton, teratonFactory"
			levelFrequency=		"----- --ruv ----- ----- -----"
			locationCriteria=	"+OuterSystem,-void"
			enemyExclusionRadius="50"

			inherit=			"&baTeratonNestBase;"
			>

			
		<Reinforcements minShips="3">
			<Table>
				<Lookup chance="20" table="&tbTeratonDefenders;"/>
				<Lookup chance="60" table="&tbTeratonPrivateCrafts;"/>
				<Ship   chance="20"	class="&scTeratonFreighter;" orders="gateOnThreat"/>
			</Table>
		</Reinforcements>
		
		<Ships>
			<Lookup count="1" table="&tbTeratonEliteDefenders;"/>
			<Lookup count="1d2" table="&tbTeratonEliteDefenders;"/>
			<Lookup count="1d2" table="&tbTeratonPrivateCrafts;"/>
			<Ship chance="50"	count="1" class="&scTeratonFreighterBig;" orders="gateOnThreat"/>
		</Ships>
		
		<Encounters frequency="common">
			<Lookup table="&tbTeratonEncounters;"/>
		</Encounters>
			
		<Names>Teraton Nest</Names>

		<Image			imageID="&rsStations9;" imageX="0" imageY="0" imageWidth="256" imageHeight="256"/>

		<Items>
			<RandomItem count="20" 
					criteria=		"* +Res;"
					level=			"7"
					levelCurve=		"3"
					/>
			<RandomItem count="10" 
					criteria=		"f"
					level=			"8"
					levelCurve=		"3"
					/>
		</Items>

		<StaticData>
			<FactoryTable>
				(	; pattern				minM	minE	minD	chgM	chgE	chgD	output		output level
					(&itRingerAmbrosia;		Nil		Nil		Nil		0		0		+5		Nil			Nil)
					(&itRingerSpice;		Nil		Nil		Nil		0		0		+1		Nil			Nil)
					(&itRadioactiveWaste;	Nil		Nil		Nil		0		-1		-5		Nil			Nil)
					(&itOrganicAcid;		Nil		Nil		Nil		0		0		-1		Nil			Nil)
					("* +Soul;"				Nil		Nil		Nil		0		0		"+l"	Nil			Nil)
					("* +Food; +Lux;"		Nil		1		Nil		0		-1		+1		Nil			Nil)
					("* +Res; +ZeroPoint;"	Nil		Nil		Nil		0		"+l"	0		Nil			Nil)
					("* +Res; +AntiMatter;"	Nil		Nil		Nil		0		"+l"	0		Nil			Nil)
					("* +Res; +Nuclear;"	Nil		Nil		Nil		0		"+l"	0		Nil			Nil)
					("* +Res;"				Nil		Nil		Nil		"+l"	0		0		Nil			Nil)
					("f"					Nil		Nil		Nil		0		"+l"	0		Nil			Nil)
					("a"					Nil		1		Nil		"+l"	-1		0		Nil			Nil)
					("* +Meds;"				Nil		Nil		Nil		0		0		"-l"	Nil			Nil)
					("w &lt;8"				"+2l"	"+2l"	2		"-2l"	"-2l"	-2		"w"			"l+1")
					("w &lt;8"				"+2l"	"+2l"	Nil		"-2l"	"-2l"	0		"w"			"l")
					("w &lt;8"				Nil		Nil		Nil		"+l"	"+l"	-1		Nil			Nil)
					("w &lt;11"				"+2l"	"+2l"	5		"-2l"	"-2l"	-5		"w"			"l+1")
					("w &lt;11"				"+2l"	"+2l"	2		"-2l"	"-2l"	-2		"w"			"l")
					("w &lt;11"				Nil		Nil		Nil		"+l"	"+l"	"-l"	Nil			Nil)
					("s &lt;8"				"+l"	"+l"	1		"-l"	"-l"	-1		"s"			"l+1")
					("s &lt;8"				"+l"	"+l"	Nil		"-l"	"-l"	0		"s"			"l")
					("s &lt;8"				Nil		Nil		Nil		"+l"	"+l"	-1		Nil			Nil)
					("s &lt;11"				"+l"	"+l"	5		"-l"	"-l"	-5		"s"			"l+1")
					("s &lt;11"				"+l"	"+l"	1		"-l"	"-l"	-1		"s"			"l")
					("s &lt;11"				Nil		Nil		Nil		"+l"	"+l"	"-l"	Nil			Nil)
					("vr &lt;8"				"+l"	"+2l"	1		"-l"	"-2l"	-1		"vr"		"l+1")
					("vr &lt;8"				"+l"	"+2l"	Nil		"-l"	"-2l"	0		"vr"		"l")
					("vr &lt;8"				Nil		Nil		Nil		"+l"	"+l"	0		Nil			Nil)
					("vr &lt;11"			"+l"	"+2l"	5		"-l"	"-2l"	-5		"vr"		"l+1")
					("vr &lt;11"			"+l"	"+2l"	1		"-l"	"-2l"	-1		"vr"		"l")
					("vr &lt;11"			Nil		Nil		Nil		"+l"	"+l"	0		Nil			Nil)
					("d~swvr &lt;8"			"+l"	"+l"	1		"-l"	"-l"	-1		"d~swvr"	"l+1")
					("d~swvr &lt;8"			"+l"	"+l"	Nil		"-l"	"-l"	0		"d~swvr"	"l")
					("d~swvr &lt;8"			Nil		Nil		Nil		"+l"	"+l"	0		Nil			Nil)
					("d~swvr &lt;11"		"+l"	"+l"	5		"-l"	"-l"	-5		"d~swvr"	"l+1")
					("d~swvr &lt;11"		"+l"	"+l"	1		"-l"	"-l"	-1		"d~swvr"	"l")
					("d~swvr &lt;11"		Nil		Nil		Nil		"+l"	"+l"	0		Nil			Nil)
					("m &lt;11"				"+l"	"+l"	Nil		"-l"	"-l"	0		"replicate"	Nil)
					("m &lt;16"				"+2l"	"+2l"	Nil		"-2l"	"-2l"	0		"replicate"	Nil)
					(Nil					Nil		Nil		Nil		0		0		0		Nil			Nil)
					)
			</FactoryTable>
		</StaticData>

		<InitialData>
			<energy>0</energy>
			<material>0</material>
			<disposition>0</disposition>
		</InitialData>

		<DockScreens>
			<Main
				name=			"=(objGetName gSource)"
				>

				<OnInit>
					(if (not (objGetData gPlayerShip "rins"))
						(objSetData gPlayerShip "rins" 0)
						)
				</OnInit>

				<Panes>
					<Default
							desc=	"You are in the peripheral tunnel of a Teraton nest. The hard walls are covered by a sinewous membrane and odd growths hang from the ceiling. There is a foul smell of rot and bile in the air.">

						<Actions>
							<Action name="Fabricator Chamber" default="1" key="F">
								<Navigate screen="Factory"/>
							</Action>

							<Action name="Trading Chamber" key="T">
								(intTeratonMugging "Exchange")
							</Action>

							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>

					</Default>

					<Exchange
							desc=	"The Trading Chamber is a vast, dark cavern where Teratons trade with various human and neo-humans. From a distance the Teratons look like abnormally tall humans, but up close you notice their deformities and mutations.">

						<Actions>
							<Action name="Buy items" default="1" key="B">
								(block Nil
									(setq gPrevScreen "Main")
									(setq gPrevPane "Exchange")
									(setq gMargin intTeratonBuyMargin)
									(scrShowScreen gScreen "&dsRingerBuy;")
									)
							</Action>

							<Action name="Sell items" key="S">
								(block Nil
									(setq gPrevScreen "Main")
									(setq gPrevPane "Exchange")
									(setq gMargin intTeratonSellMargin)
									(scrShowScreen gScreen "&dsRingerSell;")
									)
							</Action>

							<Action name="Done" cancel="1" key="D">
								<ShowPane pane="Default"/>
							</Action>

						</Actions>
					</Exchange>
				</Panes>
			</Main>

			<Factory
				name=			"=(objGetName gSource)"
				>

				<Panes>
					<Default>

						<Initialize>
							(block (disposition)
								(setq disposition (objGetData gSource "disposition"))
								(scrSetDesc gScreen
									(cat "You are in the vast central chamber of the Teraton nest. A large pit in the center of the cavern is inhabited by a mass of tentacles, cilia, and grotesque organs.\n\n"
										(switch
											(ls disposition 0)
												"The organic mass appears restless and angry."

											(geq disposition 5)
												"The organic mass purrs with contentment."

											(geq disposition 2)
												"The organic mass appears calm."

											""
											)
										)
									)
								)
						</Initialize>

						<Actions>
							<Action name="Drop item in pit" default="1" key="D">
								<Navigate screen="DropItem"/>
							</Action>

							<Action name="Leave" cancel="1" key="L">
								<Navigate screen="Main"/>
							</Action>
						</Actions>
					</Default>

					<Result>
						<Initialize>
							(scrSetDesc gScreen gResult)
						</Initialize>

						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								(if (and (ls (objGetData gSource "disposition") -9) (leq (random 1 100) 25))
									(scrShowPane gScreen "AngryTentacles")
									(scrShowPane gScreen "Default")
									)
							</Action>
						</Actions>
					</Result>

					<AngryTentacles>
						<Initialize>
							(block Nil
								(scrSetDesc gScreen "Angered by your offerings, the tentacles of the pit reach out to grab you. Before you can run, they slip around your neck and waist and pull you down into the pit.\n\nYou are dissolved by the various acids and enzymes of the grotesque organic mass.")
								(plyDestroyed gPlayer "was killed by an angry Teraton fabricator")
								)
						</Initialize>

						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								<Exit/>
							</Action>
						</Actions>
					</AngryTentacles>
				</Panes>
			</Factory>

			<DropItem
				name=			"=(objGetName gSource)"
				type=			"itemPicker"
				backgroundID=	"&rsItemListScreen;"
				>

				<ListOptions
					dataFrom=	"player"
					list=		"*U"
					/>

				<Panes>
					<Default
							desc=	"There are no items here.">

						<Initialize>
							(block (enableDrop)
								(setq gItem (scrGetItem gScreen))
								(if gItem
									(block Nil
										(scrSetDesc gScreen "What item do you wish to drop into the Teraton pit?")
										(scrEnableAction gScreen 0 True)
										)
									(scrEnableAction gScreen 0 Nil)
									)
								)
						</Initialize>

						<Actions>
							<Action name="Drop this item" default="1" key="D">
								(block (table entry criteria material energy disposition)
									(setq gItem (scrGetItem gScreen))

									; Load some variables
									(setq energy (objGetData gSource "energy"))
									(setq material (objGetData gSource "material"))
									(setq disposition (objGetData gSource "disposition"))

									; Look for the entry in the table
									(setq table (objGetStaticData gSource "FactoryTable"))
									(setq entry Nil)
									(enumwhile table (not entry) thisEntry
										(switch
											; Skip if not enough material
											(ls material (intTeratonGetValue (item thisEntry 1) gItem))
												Nil

											; Skip if not enough energy
											(ls energy (intTeratonGetValue (item thisEntry 2) gItem))
												Nil

											; Skip if not enough disposition
											(ls disposition (intTeratonGetValue (item thisEntry 3) gItem))
												Nil

											; If the criteria in the table is Nil, then we always match. This
											; is for the last (default) entry.
											(not (setq criteria (item thisEntry 0)))
												(setq entry thisEntry)

											; If the criteria is an integer, then we see if this is the UNID
											; of the item.
											(isint criteria)
												(if (eq (itmGetUNID gItem) criteria)
													(setq entry thisEntry)
													)

											; If the criteria matches, then we have an entry
											(itmMatches gItem criteria)
												(setq entry thisEntry)
											)
										)

									; Consume the item	
									(objRemoveItem gPlayerShip gItem 1)

									; Figure out the result
									(if entry
										(block (incEnergy incMaterial incDisposition output newItem)
											(setq incMaterial (intTeratonGetValue (item entry 4) gItem))
											(setq incEnergy (intTeratonGetValue (item entry 5) gItem))
											(setq incDisposition (intTeratonGetValue (item entry 6) gItem))

											(setq output (item entry 7))
											(switch
												(not output)
													(setq newItem Nil)

												(eq output "replicate")
													(setq newItem (itmCreate (itmGetUNID gItem) (random 8 12)))

												(isint output)
													(setq newItem (itmCreate output 1))

												(setq newItem (itmCreateRandom output (intTeratonGetLevelCurve (item entry 8) gItem)))
												)

											; State changes
											(objIncData gSource "material" incMaterial)
											(objIncData gSource "energy" incEnergy)
											(objIncData gSource "disposition" incDisposition)
											(if newItem
												(objAddItem gPlayerShip newItem)
												)

											; Compute the result description string
											(switch
												newItem
													(setq gResult (cat "Tentacles reach out to accept your offering and the organic mass swallows it with a hiss. Organs gurgle and glow for a while, and then tentacles pull a slimy mass out of some orifice and deposit it at your feet.\n\nYou see " (itmGetName newItem 8) "."))

												(gr incDisposition 0)
													(setq gResult "Tentacles eagerly reach out to accept your offering and the organic mass swallows it with a hiss.\n\nThe organic mass spews a sweet, pleasant mist.")

												(ls incDisposition 0)
													(setq gResult "Tentacles reach out to accept your offering and the organic mass tentatively swallows it.\n\nWith a roar of anger, the organic mass spews a thick mist of bile. You are covered in a slimy broth of chemicals.")

												(or (gr incMaterial 0) (gr incEnergy 0))
													(setq gResult "Tentacles reach out to accept your offering and the organic mass swallows it.\n\nOrgans and bladers gurgle as they process the material you have fed them.")

												(setq gResult "Tentacles reach out to accept your offering, but after a tentative taste, they crush it and discard it through one of the many tunnels along the wall of the pit.")
												)

											; DEBUG
											; (setq gResult (cat gResult "\n\nM=" (objGetData gSource "material") " E=" (objGetData gSource "energy") " D=" (objGetData gSource "disposition")))
											)
										(setq gResult "Tentacles reach out to accept your offering, but after a tentative taste, they crush it and discard it through one of the many tunnels along the wall of the pit.")
										)

									; Next
									(scrShowScreen gScreen "Factory" "Result")
									)
							</Action>

							<Action name="Cancel" cancel="1" key="C">
								<Navigate screen="Factory"/>
							</Action>
						</Actions>
					</Default>

				</Panes>
			</DropItem>

		</DockScreens>

		<DockingPorts>
			<Port x="-64"	y="77" />
			<Port x="-32"	y="126" />
			<Port x="0"		y="77" />
			<Port x="78"	y="-20" />
			<Port x="124"	y="-80" />
			<Port x="54"	y="-80" />
			<Port x="-40"	y="-68" />
			<Port x="-106"	y="-64" />
			<Port x="-72"	y="0" />
		</DockingPorts>

	</StationType>

	<!-- Teraton Research Center -->

	<StationType UNID="&stTeratonResearch;"
			name=				"Teraton research center"
			sovereign=			"&svTeraton1;"
			dockScreen=			"Main"
			abandonedScreen=	"&dsAbandonedStation;"
			canAttack=			"true"

			multiHull=			"true"
			armorID=			"&itIthaliumArmor;"
			maxHitPoints=		"850"
			hitPoints=			"850"
			repairRate=			"10"
			fireRateAdj=		"10"
			explosionType=		"&vtPlasmaExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"independent,friendly,envAir,envAvoidsFire,populated, teraton, teratonResearch"
			levelFrequency=		"----- --rr- ----- ----- -----"
			locationCriteria=	"+OuterSystem,-void"
			enemyExclusionRadius="50"

			inherit=			"&baTeratonNestBase;"
			>

		<Reinforcements minShips="3">
			<Table>
				<Lookup chance="20" table="&tbTeratonDefenders;"/>
				<Lookup chance="60" table="&tbTeratonPrivateCrafts;"/>
				<Ship   chance="20"	class="&scTeratonFreighter;" orders="gateOnThreat"/>
			</Table>
		</Reinforcements>
		
		<Ships>
			<Lookup count="1" table="&tbTeratonEliteDefenders;"/>
			<Lookup count="1d2" table="&tbTeratonEliteDefenders;"/>
			<Lookup count="1d2" table="&tbTeratonPrivateCrafts;"/>
			<Ship chance="50"	count="1" class="&scTeratonFreighterBig;" orders="gateOnThreat"/>
		</Ships>
		
		<Encounters frequency="common">
			<Lookup table="&tbTeratonEncounters;"/>
		</Encounters>
			
		<Names>Teraton Nest</Names>

		<Image			imageID="&rsStations9;" imageX="0" imageY="0" imageWidth="256" imageHeight="256"/>

		<Items>
			<RandomItem count="12" 
					criteria=		"*"
					level=			"7"
					levelCurve=		"1"
					/>
			<RandomItem count="1d2" 
					criteria=		"* +Alien;"
					level=			"9"
					levelCurve=		"3"
					/>
		</Items>

		<DockScreens>
			<Main
				name=			"=(objGetName gSource)"
				>

				<OnInit>
					(if (not (objGetData gPlayerShip "rins"))
						(objSetData gPlayerShip "rins" 0)
						)
				</OnInit>

				<Panes>
					<Default
							desc=	"You are in the peripheral tunnel of a Teraton nest. The hard walls are covered by a sinewous membrane and odd growths hang from the ceiling. There is a foul smell of rot and bile in the air.">

						<Actions>
							<Action name="Research Chamber" default="1" key="R">
								(if (or (not (objGetData gSource "LastExperiment"))
										(gr (subtract (unvGetTick) (objGetData gSource "LastExperiment")) 3600))
									(scrShowPane gScreen "Research")
									(scrShowPane gScreen "ResearchNone")
									)
							</Action>

							<Action name="Trading Chamber" key="T">
								(intTeratonMugging "Exchange")
							</Action>

							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>

					</Default>

					<Research>
						<Initialize>
							(scrSetDesc gScreen
								"You enter a dim cavern filled with arcane equipment. Dozens of human subjects, wired, tubed, and in various stages of health and wholeness, lie on articulated beds.\n\nA tall Teraton with supernumerary fingers approaches you. \"Human! You desire to join the research? You will be compensated with gifts from beyond.\""
								)
						</Initialize>

						<Actions>
							<Action name="&quot;Sure&#x97;anything for the advancement of science.&quot;" default="1" key="S">
								(block (dieRoll)
									(setq dieRoll (random 1 100))
									(switch
										; Physical mutilation
										(leq dieRoll 15)
											(block Nil
												(switch
													(leq (random 1 100) 95)
														(setq gResult "success")

													(intConsumeItem gPlayerShip (itmCreate &itArtificialPlasma; 1))
														(setq gResult "use-plasma")

													(objHasItem gPlayerShip (itmCreate &itPortableAutodoc; 1))
														(setq gResult "use-autodoc")

													(setq gResult "death")
													)

												(scrShowPane gScreen "ResearchMutilation")
												)

										; Filovirus
										(leq dieRoll 50)
											(block Nil
												(switch
													(leq (random 1 100) 85)
														(setq gResult "success")

													(intConsumeItem gPlayerShip (itmCreate &itCyanavir; 1))
														(setq gResult "use-cyanavir")

													(objHasItem gPlayerShip (itmCreate &itPortableAutodoc; 1))
														(setq gResult "use-autodoc")

													(setq gResult "death")
													)

												(scrShowPane gScreen "ResearchFilovirus")
												)

										; Mutagens
										(leq dieRoll 85)
											(block Nil
												(switch
													(leq (random 1 100) 67)
														(setq gResult "success")

													(intConsumeItem gPlayerShip (itmCreate &itDeathDrugs; 1))
														(setq gResult "use-deathdrugs")

													(objHasItem gPlayerShip (itmCreate &itPortableAutodoc; 1))
														(setq gResult "use-autodoc")

													(setq gResult "death")
													)

												(scrShowPane gScreen "ResearchMutagen")
												)

										; Alien parasite
										(leq dieRoll 100)
											(block Nil
												(switch
													(intConsumeItem gPlayerShip (itmCreate &itHypermycin; 1))
														(if (leq (random 1 100) 95)
															(setq gResult "use-hypermycin")
															(setq gResult "death")
															)

													(objHasItem gPlayerShip (itmCreate &itPortableAutodoc; 1))
														(if (leq (random 1 100) 80)
															(setq gResult "use-autodoc")
															(setq gResult "death")
															)

													(setq gResult "death")
													)

												(scrShowPane gScreen "ResearchParasite")
												)
										)
									)
							</Action>

							<Action name="&quot;No thanks.&quot;" cancel="1" key="N">
								<ShowPane pane="ResearchDecline"/>
							</Action>
						</Actions>
					</Research>

					<ResearchNone
							desc=	"You enter a dim cavern filled with arcane equipment. Dozens of human subjects, wired, tubed, and in various stages of health and wholeness, lie on articulated beds. A tall Teraton with supernumerary fingers tends to the patients with a mixture of curiosity and concern.">
						<Actions>
							<Action name="Leave" cancel="1" default="1" key="L">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</ResearchNone>

					<ResearchMutilation
							desc=	"The Teraton takes you to an empty bed and straps you down so that you cannot move. It then takes a scalpel and slices open both your forearms from the elbow to the wrist. You bleed profusely and mercifully pass out after a few minutes of screaming.">
						<Actions>
							<Action name="Continue" cancel="1" default="1" key="C">
								<ShowPane pane="ResearchMutilation2"/>
							</Action>
						</Actions>
					</ResearchMutilation>

					<ResearchMutilation2>
						<Initialize>
							(switch
								(eq gResult "success")
									(scrSetDesc gScreen "You wake up in the nightmarish chamber and notice that both your arms are bandaged up.\n\nThe Teraton attempts a smile and says, \"Human! Your body is weak and easily killed. We have repaired as best as possible. For your pains we will reward you.\"")

								(eq gResult "use-plasma")
									(scrSetDesc gScreen "You wake up in your ship with bloody bandages over both your arms. You open a case of artificial plasma and set up a transfusion.\n\nYou start to feel better after an hour.")

								(eq gResult "use-autodoc")
									(scrSetDesc gScreen "You wake up in your ship with bloddy bandages over both your arms. You activate your portable autodoc and it drips a concoction of fluids and growth stims into your arm.\n\nYou start to feel better immediately.")

								(block Nil									
									(scrSetDesc gScreen "Overnight your blood pressure drops as the bleeding continues.\n\nIn the morning, the Teraton takes your lifeless body and dumps it into space.")
									(plyDestroyed gPlayer (cat "was killed in a Teraton medical experiment"))
									)
								)
						</Initialize>

						<Actions>
							<Action name="Continue" cancel="1" default="1" key="C">
								(if (eq gResult "death")
									(scrExitDock gScreen)
									(scrShowPane gScreen "ResearchGift")
									)
							</Action>
						</Actions>
					</ResearchMutilation2>

					<ResearchFilovirus
							desc=	"The Teraton takes you to an empty bed and straps you down so that you cannot move. It then takes a syringe and injects you with something. At first you feel OK, but after a few hours you ache all over and begin to vomit. After a couple of days you begin to bleed from every orifice and you mercifully fall into a coma.">
						<Actions>
							<Action name="Continue" cancel="1" default="1" key="C">
								<ShowPane pane="ResearchFilovirus2"/>
							</Action>
						</Actions>
					</ResearchFilovirus>

					<ResearchFilovirus2>
						<Initialize>
							(switch
								(eq gResult "success")
									(scrSetDesc gScreen "You wake up in the nightmarish chamber, a taste of vomit in your mouth, but otherwise OK.\n\nThe Teraton attempts a smile and says, \"Human! Your body is weak and easily killed. We have repaired as best as possible. For your pains we will reward you.\"")

								(eq gResult "use-cyanavir")
									(scrSetDesc gScreen "You wake up in your ship covered in blood and vomit. You dose yourself with a course of cyanavir and try to sleep it off.\n\nAfter several days you recover enough to be able to eat again.")

								(eq gResult "use-autodoc")
									(scrSetDesc gScreen "You wake up in your ship covered in blood and vomit. You activate your portable autodoc and it drips a concoction of antivirals into your arm.\n\nYou start to feel better after a few days.")

								(block Nil
									(scrSetDesc gScreen "Overnight you crash out as your organs liquify from the viral load.\n\nIn the morning, the Teraton carefully places your lifeless form into a body bag and dumps it into space.")
									(plyDestroyed gPlayer (cat "was killed in a Teraton medical experiment"))
									)
								)
						</Initialize>

						<Actions>
							<Action name="Continue" cancel="1" default="1" key="C">
								(if (eq gResult "death")
									(scrExitDock gScreen)
									(scrShowPane gScreen "ResearchGift")
									)
							</Action>
						</Actions>
					</ResearchFilovirus2>

					<ResearchMutagen
							desc=	"The Teraton takes you to an empty bed and straps you down so that you cannot move. It then opens up a large jar and carefully removes what looks like a cancerous growth. Slicing your chest with quick strokes, the Teraton implants the growth into your body. You pass out from the pain before it finishes.">
						<Actions>
							<Action name="Continue" cancel="1" default="1" key="C">
								<ShowPane pane="ResearchMutagen2"/>
							</Action>
						</Actions>
					</ResearchMutagen>

					<ResearchMutagen2>
						<Initialize>
							(switch
								(eq gResult "success")
									(scrSetDesc gScreen "You wake up in the nightmarish chamber, a large bandage covering your chest.\n\nThe Teraton attempts a smile and says, \"Human! Your body is weak and easily killed. We have repaired as best as possible. For your pains we will reward you.\"")

								(eq gResult "use-deathdrugs")
									(scrSetDesc gScreen "You wake up in your ship covered in blood. You dose yourself with a course of cancer dust and try to sleep it off.\n\nAfter several days you recover enough to be able to eat again.")

								(eq gResult "use-autodoc")
									(scrSetDesc gScreen "You wake up in your ship covered in blood. You activate your portable autodoc and it drips a concoction of oncokillers into your arm.\n\nYou start to feel better after a few days.")

								(block Nil								
									(scrSetDesc gScreen "For days, the growth inside your chest gets bigger, feeding on your blood supply. After a month, the cancer metastasizes to your eyes and mouth.\n\nAfter two months, the Teraton dumps your lifeless body into space.")
									(plyDestroyed gPlayer (cat "was killed in a Teraton medical experiment"))
									)
								)
						</Initialize>

						<Actions>
							<Action name="Continue" cancel="1" default="1" key="C">
								(if (eq gResult "death")
									(scrExitDock gScreen)
									(scrShowPane gScreen "ResearchGift")
									)
							</Action>
						</Actions>
					</ResearchMutagen2>

					<ResearchParasite
							desc=	"The Teraton takes you to an empty bed and straps you down so that you cannot move. It then opens up a small jar and carefully removes a translucent and gelatinous eel of some sort. Holding your head steady, it guides the eel into your nasal passage. The eel seems undisturbed by your piercing screams.">
						<Actions>
							<Action name="Continue" cancel="1" default="1" key="C">
								<ShowPane pane="ResearchParasite2"/>
							</Action>
						</Actions>
					</ResearchParasite>

					<ResearchParasite2>
						<Initialize>
							(switch
								(eq gResult "use-hypermycin")
									(scrSetDesc gScreen "You wake up in your ship with a splitting headache and a nasty nose bleed. You dose yourself with a course of hypermycin and try to sleep it off.\n\nOne morning you find a shriveled and desiccated eel by your pillow, and after that the headaches disappear.")

								(eq gResult "use-autodoc")
									(scrSetDesc gScreen "You wake up in your ship with a splitting headache and a nasty nose bleed. You activate your portable autodoc and it drips a concoction of antibiotics into your arm.\n\nOne morning you find a shriveled and desiccated eel by your pillow, and after that the headaches disappear.")

								(block Nil									
									(scrSetDesc gScreen "For days the eel grows inside your head, eating everything before it. Fortunately, the damage to your brain slips you into a deep catatonia and you feel nothing.\n\nAfter a month, the Teraton takes your lifeless body and dumps it into space.")
									(plyDestroyed gPlayer (cat "was killed in a Teraton medical experiment"))
									)
								)
						</Initialize>

						<Actions>
							<Action name="Continue" cancel="1" default="1" key="C">
								(if (eq gResult "death")
									(scrExitDock gScreen)
									(scrShowPane gScreen "ResearchGift")
									)
							</Action>
						</Actions>
					</ResearchParasite2>

					<ResearchGift>
						<Initialize>
							(block (dieRoll)
								(setq dieRoll (random 1 100))
								(switch
									(leq dieRoll 40)
										(setq gItem (itmCreate &itPromethiumCrystal; 1))

									(leq dieRoll 75)
										(setq gItem (itmCreateRandom "* +Res;" "----- -ccur"))

									(leq dieRoll 100)
										(setq gItem (itmCreateRandom "wsd +MajorItem;" "----- -c---"))
									)

								(scrSetDesc gScreen
									(cat "Once you've recovered, the Teraton comes to your ship, \"Human! This payment compensates for your damage.\""
										"\n\nIt drops off " (itmGetName gItem 8) " and leaves without another word."
										)
									)
								)
						</Initialize>

						<Actions>
							<Action name="Leave" cancel="1" default="1" key="L">
								(block Nil
									(objAddItem gPlayerShip gItem)
									(objSetData gSource "LastExperiment" (unvGetTick))
									(scrShowPane gScreen "Default")
									)
							</Action>
						</Actions>
					</ResearchGift>

					<ResearchDecline
							desc=	"The Teraton growls in disappointment. He turns away and continues his work on the human subjects.">

						<Actions>
							<Action name="Leave" cancel="1" default="1" key="L">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</ResearchDecline>

					<Exchange
							desc=	"The Trading Chamber is a vast, dark cavern where Teratons trade with various human and neo-humans. From a distance the Teratons look like abnormally tall humans, but up close you notice their deformities and mutations.">

						<Actions>
							<Action name="Buy items" default="1" key="B">
								(block Nil
									(setq gPrevScreen "Main")
									(setq gPrevPane "Exchange")
									(setq gMargin intTeratonBuyMargin)
									(scrShowScreen gScreen "&dsRingerBuy;")
									)
							</Action>

							<Action name="Sell items" key="S">
								(block Nil
									(setq gPrevScreen "Main")
									(setq gPrevPane "Exchange")
									(setq gMargin intTeratonSellMargin)
									(scrShowScreen gScreen "&dsRingerSell;")
									)
							</Action>

							<Action name="Leave" cancel="1" key="L">
								<ShowPane pane="Default"/>
							</Action>

						</Actions>
					</Exchange>
				</Panes>
			</Main>

		</DockScreens>

		<DockingPorts>
			<Port x="-64"	y="77" />
			<Port x="-32"	y="126" />
			<Port x="0"		y="77" />
			<Port x="78"	y="-20" />
			<Port x="124"	y="-80" />
			<Port x="54"	y="-80" />
			<Port x="-40"	y="-68" />
			<Port x="-106"	y="-64" />
			<Port x="-72"	y="0" />
		</DockingPorts>

	</StationType>

	<!-- Teraton Trading Post -->

	<StationType UNID="&stTeratonTradingPost;"
			name=				"Teraton trading post"
			sovereign=			"&svTeraton1;"
			dockScreen=			"Main"
			abandonedScreen=	"&dsAbandonedStation;"
			canAttack=			"true"

			multiHull=			"true"
			armorID=			"&itIthaliumArmor;"
			maxHitPoints=		"850"
			hitPoints=			"850"
			repairRate=			"10"
			fireRateAdj=		"10"
			explosionType=		"&vtPlasmaExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"independent,friendly,envAir,envAvoidsFire,populated, teraton, teratonTrading"
			levelFrequency=		"----- -vcuv ----- ----- -----"
			locationCriteria=	"+OuterSystem,-void"
			enemyExclusionRadius="50"

			inherit=			"&baTeratonNestBase;"
			>

		<Reinforcements minShips="3">
			<Table>
				<Lookup chance="20" table="&tbTeratonDefenders;"/>
				<Lookup chance="60" table="&tbTeratonPrivateCrafts;"/>
				<Ship   chance="20"	class="&scTeratonFreighter;" orders="gateOnThreat"/>
			</Table>
		</Reinforcements>
		
		<Ships>
			<Lookup count="1" table="&tbTeratonEliteDefenders;"/>
			<Lookup count="1d2" table="&tbTeratonEliteDefenders;"/>
			<Lookup count="1d2" table="&tbTeratonPrivateCrafts;"/>
			<Ship chance="50"	count="1" class="&scTeratonFreighterBig;" orders="gateOnThreat"/>
		</Ships>
		
		<Encounters frequency="common">
			<Lookup table="&tbTeratonEncounters;"/>
		</Encounters>
		
		<Names>Teraton Nest</Names>

		<Image			imageID="&rsStations9;" imageX="0" imageY="0" imageWidth="256" imageHeight="256"/>

		<Items>
			<RandomItem count="20" 
					criteria=		"*"
					level=			"7"
					levelCurve=		"1"
					/>
			<RandomItem count="10" 
					criteria=		"adm"
					level=			"8"
					levelCurve=		"1"
					/>
			<RandomItem count="5" 
					criteria=		"wm"
					level=			"9"
					levelCurve=		"2"
					/>
			<RandomItem count="5" 
					criteria=		"fmut +Consumable;"
					level=			"10"
					levelCurve=		"2"
					/>
		</Items>

		<DockScreens>
			<Main
				name=			"=(objGetName gSource)"
				>

				<OnInit>
					(if (not (objGetData gPlayerShip "rins"))
						(objSetData gPlayerShip "rins" 0)
						)
				</OnInit>

				<Panes>
					<Default
							desc=	"You are in the peripheral tunnel of a Teraton nest. The hard walls are covered by a sinewous membrane and odd growths hang from the ceiling. There is a foul smell of rot and bile in the air.">

						<Actions>
							<Action name="Trading Chamber" default="1" key="T">
								(intTeratonMugging "Exchange")
							</Action>

							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>

					</Default>

					<Exchange
							desc=	"The Trading Chamber is a vast, dark cavern where Teratons trade with various human and neo-humans. From a distance the Teratons look like abnormally tall humans, but up close you notice their deformities and mutations.">

						<Actions>
							<Action name="Buy items" default="1" key="B">
								(block Nil
									(setq gPrevScreen "Main")
									(setq gPrevPane "Exchange")
									(setq gMargin intTeratonBuyMargin)
									(scrShowScreen gScreen "&dsRingerBuy;")
									)
							</Action>

							<Action name="Sell items" key="S">
								(block Nil
									(setq gPrevScreen "Main")
									(setq gPrevPane "Exchange")
									(setq gMargin intTeratonSellMargin)
									(scrShowScreen gScreen "&dsRingerSell;")
									)
							</Action>

							<Action name="Done" cancel="1" key="D">
								<ShowPane pane="Default"/>
							</Action>

						</Actions>
					</Exchange>
				</Panes>
			</Main>

		</DockScreens>

		<DockingPorts>
			<Port x="-64"	y="77" />
			<Port x="-32"	y="126" />
			<Port x="0"	y="77" />
			<Port x="78"	y="-20" />
			<Port x="124"	y="-80" />
			<Port x="54"	y="-80" />
			<Port x="-40"	y="-68" />
			<Port x="-106"	y="-64" />
			<Port x="-72"	y="0" />
		</DockingPorts>

	</StationType>

	<Globals>
		(block Nil
			(setq intConsumeItem (lambda (theObj theItem)
				(if (objHasItem theObj theItem)
					(block Nil
						(objRemoveItem theObj theItem)
						True
						)
					Nil
					)
				))
				
			(setq terCreateDefender (lambda (theNest)
				(block (thePos theObj)
					; Pick a proper location for the defender
					(setq thePos (sysVectorRandom theNest (random 7 20) 4 "t"))
					
					; Create the chrysalis
					(setq theObj (sysCreateStation &stTeratonChrysalis; thePos))
					(objAddSubordinate theNest theObj)
					
					; Set params
					(objSetData theObj "type" 'defender)
					
					; Chrysalis will open in 1 minute
					(objSetData theObj "openTime" (add (unvGetTick) 1800))
					)
				))

			(setq intTeratonBuyMargin (lambda (thisItem)
				(block (cost)
					(switch
						; Better not be installed or damaged
						(or (itmIsInstalled thisItem) (itmIsDamaged thisItem))
							(setq cost 0)

						; Player cannot buy 'Soul' items
						(itmHasModifier thisItem "Soul")
							(setq cost 0)

						; 'RingerValuable' items are cheaper here
						(itmHasModifier thisItem "RingerValuable")
							(setq cost (divide (multiply (itmGetPrice thisItem) 4) 5))

						; 'Alien' items for 1/4 cost
						(itmHasModifier thisItem "Alien")
							(setq cost (divide (itmGetPrice thisItem) 4))

						; All other items for 1/5 price
						(setq cost (divide (itmGetPrice thisItem) 5))
						)

					; round up
					(setq cost (multiply (divide (add cost 4) 5) 5))

					(if (gr cost 0)
						cost
						Nil
						)
					)
				))

			(setq intTeratonGetLevelCurve (lambda (value theItem)
				(switch
					(isint value)
						(block (result)
							(setq result "")
							(for i 1 5 (setq result (cat result (if (eq i value) "c" "-"))))
							(setq result (cat result " "))
							(for i 6 10 (setq result (cat result (if (eq i value) "c" "-"))))
							(setq result (cat result " "))
							(for i 11 15 (setq result (cat result (if (eq i value) "c" "-"))))
							result
							)

					(eq value "l")
						(intTeratonGetLevelCurve (itmGetLevel theItem) theItem)

					(eq value "l+1")
						(intTeratonGetLevelCurve (add (itmGetLevel theItem) 1) theItem)

					(eq value "l-1")
						(intTeratonGetLevelCurve (subtract (itmGetLevel theItem) 1) theItem)

					(eq value "l+2")
						(intTeratonGetLevelCurve (add (itmGetLevel theItem) 2) theItem)

					"ccccc ccccc"
					)
				))

			(setq intTeratonGetValue (lambda (value theItem)
				(switch
					(not value)
						-1000

					(isint value)
						value

					(eq value "+l")
						(itmGetLevel theItem)

					(eq value "-l")
						(subtract 0 (itmGetLevel theItem))

					(eq value "+2l")
						(multiply (itmGetLevel theItem) 2)

					(eq value "-2l")
						(subtract 0 (multiply (itmGetLevel theItem) 2))

					0
					)
				))

			(setq intTeratonMugging (lambda (destination)
				(switch
					; If the player is not too powerful then there is a chance that
					; the Teratons will just take what they want.

					(or (and (ls (objGetCombatPower gPlayerShip) 15) (leq (random 1 100) 25))
							(and (ls (objGetCombatPower gPlayerShip) 25) (leq (random 1 100) 5)))
						(block (bestItem bestValue value)

							; Look for the most expensive item that the player has
							(setq bestValue 0)
							(objEnumItems gPlayerShip "*U" theItem
								(block Nil
									(setq value (multiply (intTeratonSellMargin theItem) (itmGetCount theItem)))
									(if (and value (gr value bestValue))
										(block Nil
											(setq bestItem theItem)
											(setq bestValue value)
											)
										)
									)
								)

							; If we found something interesting, then take it
							(if bestItem
								(block Nil
									(objRemoveItem gPlayerShip bestItem)
									(objAddItem gSource bestItem)

									(setq gItem bestItem)
									(scrShowScreen gScreen "&dsTeratonMugging;")
									)
								(scrShowPane gScreen destination)
								)
							)

					(scrShowPane gScreen destination)
					)
				))

			(setq intTeratonSellMargin (lambda (thisItem)
				(block (cost)
					(switch
						; Better not be installed or damaged
						(or (itmIsInstalled thisItem) (itmIsDamaged thisItem))
							(setq cost 0)

						; We pay 1000 rin for 'Soul' items
						(itmHasModifier thisItem "Soul")
							(setq cost 1000)

						; We buy 'Alien' items
						(itmHasModifier thisItem "Alien")
							(setq cost (divide (itmGetPrice thisItem) 10))

						; We buy high-level resources
						(and (itmHasModifier thisItem "Res")
								(geq (itmGetLevel thisItem) 6))
							(setq cost (divide (itmGetPrice thisItem) 12))

						; We buy high-level weapons and ammo
						(itmMatches thisItem "wm &gt;6")
							(setq cost (divide (itmGetPrice thisItem) 20))

						; Otherwise, no sale
						(setq cost 0)
						)

					; Unknown items are discounted
					(if (not (itmIsKnown thisItem))
						(setq cost (divide cost 10))
						)

					; round down
					(setq cost (multiply (divide cost 5) 5))

					(if (gr cost 0)
						cost
						Nil
						)
					)
				))
			)
	</Globals>

	<!-- Teraton Mugging Screen -->

	<DockScreen UNID="&dsTeratonMugging;"
			name=				"=(objGetName gSource)"
			>

		<Panes>
			<Default>
				<Initialize>
					(scrSetDesc gScreen
						(cat 
							"You try to enter the Trading Chamber but a group of Teratons grab you and drag you back to your ship. Snorting with contempt for your weak ship, they rumage through your cargo hold looking for valuable items.\n\nThey take "
							(itmGetName gItem 8)
							" and leave you in pain on the deck of your ship."
							)
						)
				</Initialize>

				<Actions>
					<Action name="Continue" default="1" cancel="1" key="C">
						<Exit/>
					</Action>
				</Actions>
			</Default>
		</Panes>

	</DockScreen>
	
<!-- TABLES -->

	<!-- Teraton defenders for normal stations -->

	<ShipTable unid="&tbTeratonDefenders;">
		<LevelTable>
			<Ship levelFrequency="uuucc ccccc" count="1" class="&scTeratonFighter;" orders="guard"/>
			<Ship levelFrequency="--ruu uuurr" count="1" class="&scTeratonGunship;" orders="guard"/>
			<Ship levelFrequency="--ruc cuuuu" count="1" class="&scTeratonHeavyGunship;" orders="guard"/>
			<Ship levelFrequency="----- vvuuu" count="1" class="&scTeratonDefender;" orders="guard"/>
		</LevelTable>
	</ShipTable>
	
	<!-- Teraton defenders for large/important stations -->

	<ShipTable unid="&tbTeratonEliteDefenders;">
		<LevelTable>
			<Ship levelFrequency="--ccu rrvvv" count="1" class="&scTeratonFighter;" orders="guard"/>
			<Ship levelFrequency="--ruu uurrr" count="1" class="&scTeratonGunship;" orders="guard"/>
			<Ship levelFrequency="--ruc rruuu" count="1" class="&scTeratonHeavyGunship;" orders="guard"/>
			<Ship levelFrequency="--vvv vrucc" count="1" class="&scTeratonDefender;" orders="guard"/>
		</LevelTable>
	</ShipTable>

	<!-- Teraton private crafts -->

	<ShipTable unid="&tbTeratonPrivateCrafts;">
		<LevelTable>
			<Ship levelFrequency="----c uurv-" count="1" class="&scWolfen;" orders="gateOnThreat"/>
			<Ship levelFrequency="----v vvurr" count="1" class="&scEI500;" orders="gateOnThreat"/>
			<Ship levelFrequency="----c ccccc" count="1" class="&scTeratonFreighter;" orders="gateOnThreat"/>
			<Ship levelFrequency="----c ccccc" count="1" class="&scTeratonFreighterBig;" orders="gateOnThreat"/>
			<Ship levelFrequency="----u uurrv" count="1" class="&scEI7000;" orders="gateOnThreat"/>
			<Ship levelFrequency="----u uuurr" count="1" class="&scTeratonFighter;" orders="gateOnThreat"/>
		</LevelTable>
	</ShipTable>
	
	<!-- Teraton random traffic -->
	
	<ShipTable unid="&tbTeratonTraffic;">
		<LevelTable>
			<Ship levelFrequency="-rrcc ccccc" count="1" class="&scTeratonFreighter;" orders="gateOnThreat"/>
			<Ship levelFrequency="-rrcc ccccc" count="1" class="&scTeratonFreighterBig;" orders="gateOnThreat"/>
		</LevelTable>
	</ShipTable>

	<!-- Teraton encounter traffic -->
	
	<ShipTable unid="&tbTeratonEncounters;">
		<LevelTable>
			<Ship levelFrequency="--ccu ccurv" count="1" class="&scTeratonFighter;" eventHandler="&evStdPatrolEncounterBehavior;" sovereign="&svTeratonRaiders;"/>
			<Ship levelFrequency="--ccu rrvvv" count="1" class="&scTeratonFighter;" orders="wander"/>
			<Ship levelFrequency="--ruu uurrr" count="1" class="&scTeratonGunship;" orders="wander"/>
			<Ship levelFrequency="--ruc rruuu" count="1" class="&scTeratonHeavyGunship;" orders="wander"/>
			<Ship levelFrequency="--vvv vrucc" count="1" class="&scTeratonDefender;" orders="wander">
				<Escorts>
					<Table>
						<Ship chance="50"	   count="1d2"	class="&scTeratonFighter;" orders="escort"/>
						<Ship chance="50"	   count="1d2-1"	class="&scTeratonGunship;" orders="escort"/>
					</Table>
				</Escorts>
			</Ship>
			
			<Ship levelFrequency="----- -vruc" count="1" class="&scTeratonDrill;" eventHandler="&evStdPatrolEncounterBehavior;" sovereign="&svTeratonRaiders;">
				<Escorts>
					<Table>
						<Ship chance="50"	   count="1d2"	class="&scTeratonFighter;" orders="escort"/>
						<Ship chance="50"	   count="1d2-1"	class="&scTeratonGunship;" orders="escort"/>
					</Table>
				</Escorts>
			</Ship>
			<Ship levelFrequency="--vvv vrucc" count="1" class="&scTeratonHeavyGunship;" eventHandler="&evStdPatrolEncounterBehavior;" sovereign="&svTeratonRaiders;">
				<Escorts>
					<Table>
						<Ship chance="50"	   count="1d2"	class="&scTeratonFighter;" orders="escort"/>
						<Ship chance="50"	   count="1d2-1"	class="&scTeratonGunship;" orders="escort"/>
					</Table>
				</Escorts>
			</Ship>
			<Ship levelFrequency="--vvv rucuu" count="1" class="&scTeratonHeavyGunship;" eventHandler="&evStdPatrolEncounterBehavior;" sovereign="&svTeratonRaiders;">
				<Escorts>
					<Table>
						<Ship chance="50"	   count="1d2"	class="&scTeratonFighter;" orders="escort"/>
						<Ship chance="50"	   count="1d2-1"	class="&scTeratonGunship;" orders="escort"/>
					</Table>
				</Escorts>
			</Ship>
		</LevelTable>
	</ShipTable>
	
</TranscendenceModule>